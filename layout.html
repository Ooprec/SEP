<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="layout.css">
    <link rel="stylesheet" href="animations.css">
    <title>Layout</title>
</head>
<body class="light">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <div id="main-page" class="light">
        <h1 id="header" class="maroon" >
            <p id="header-text" class="title-anim">Student Elections</p> 
        </h1>

        <!--start collapsible-->
        <label id="collapsible-label" class="collapsible-label" for="collapsible">Upload Election</label>
        <button type="button" id="collapsible" class="collapsible maroon">Upload Election</button>
        <div class="collapsible-content">
        <form action="" id="uploadForm">
            <div id="inputs" class="light">
                <label for="csv" id="upload-csv-label" class="input-label">Upload CSV:</label>
                <label for="csv" id="replacement-button" class="custom-overlay-button">Choose File...</label>
                <input type="file" id="csv"> <br><br>
                
                <label for="csv-name" class="input-label">Election Name: </label>
                <input type="text" id="csv-name">

                <br><br>
                <label for="submit" class="custom-overlay-button">Submit</label>
                <button type="submit" class="hidden-button" id="submit" onclick="importCSVToDatabase()"></button>

                
                </div>
            </form>
         </div> <!--end collapsible-->


        <div class="thin-bar maroon"></div>
        <br>


        <div id="Lbar-container">
            <label for="Lbar-bar" id="Lbar-text">Test</label>
            
            <div id="Lbar-border">
                <div id="Lbar-bar" class="unstarted"></div>
            </div>
            
        </div>
        <div id="post-form">
            <select id="csv-options"></select></select>
            <label for="download" class="custom-overlay-button">Pull CSV</label>
            <button id="download" class="hidden-button" onclick="loadFromDatabase();vote(JSON.parse(sessionStorage.getItem('allVotes')))"></button>
        </div>
        
        <!-- <div id="sections-parent">
            <div id="sections">
                <div id="tabs" class="tab-container">
                    <div id="honor-tab" class="honor 0 selectable-tab unselected" onclick=" selectTab(this)">Honor</div>
                    </div>
                    <div id="shown-results" class="light">
                        
                    </div>
                </div>

            </div>

        </div> -->

    </div>

     <!--start collapsible-->
    <label id="collapsible-label" class="collapsible-label" for="electionresultscollapsible">Election Results</label>
    <button type="button" id="electionresultscollapsible" class="collapsible maroon">Election Results</button>
    
    <div class="collapsible-content-election" id="chartDiv">
    </div> <!--end collapsible-->

    


    <button type="button" id="thingy">Count</button>
    <button type="button" id="thingo">Covintong</button>
    <!--Links layout to upload and imports the csv database function-->
    <script src="./animations.js"></script>
    <script src="./layout.js"></script>
    <script type="module" src="./upload.js"></script>
    <script type="module" src="./vote.js"></script>
    <script type="module">
        import * as uploadjs from "./upload.js";
        import * as votejs from "./vote.js";
        import * as optjs from "./optimizations.js";
        window.importCSVToDatabase = uploadjs.importCSVToDatabase;
        window.loadFromDatabase = votejs.loadFromDatabase;
        window.getCollectionList = uploadjs.getCollectionList;
        window.vote = votejs.vote;
        window.count = votejs.count;
        window.checkLocal = optjs.checkLocal;
        
        getCollectionList();
        checkLocal();

        vote(JSON.parse(sessionStorage.getItem('allVotes')));
      </script>
</body>
</html>