<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/layout.css">
    <link rel="stylesheet" href="./styles/animations.css">
    <title>Student Election Project</title>
</head>
<body class="light">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <div id="main-page" class="light">
        
        <h1 id="header" class="maroon" >
            <img id = "mayo" src="./assets/logo.png" alt="logo">
            <p id="header-text" class="title-anim">Student Elections</p> 
        </h1>
    <!-- This is the navigation bar html bit the class active indicates which page is open-->
    <div class="topnav">
        <a href="#home" onclick="location.replace('./instructions.html')">Upload</a>
        <a class="active" href="#news">Elections</a>
    </div>

        <!-- <div id="instruct-div">
            <button id="goto-instructions" class="hidden-button" onclick="location.replace('./instructions.html')"></button>
            <label  id="goto-instructions-label" for="goto-instructions" class="custom-overlay-button">Go to Instructions</label>
        </div> -->


        <div id="post-form">
            <select id="csv-options" class="light" onchange=""></select>
            <label for="download" class="custom-overlay-button">Run</label>
            <!-- <button id="download" onclick="sessionStorage.setItem('on-second', JSON.stringify(false));document.getElementById('chartDiv').innerHTML = ''; loadFromDatabase();vote(JSON.parse(sessionStorage.getItem('allVotes'))); document.getElementById('Lbar-container').click(); document.getElementById('Lbar-container').click()" class="hidden-button" ></button> -->
            
            <button id="download" onclick="document.dispatchEvent(new CustomEvent('displayRounds'))" class="hidden-button" ></button>

            <label for="thingss" class="custom-overlay-button">Delete Election</label>
            <button id="thingss" onclick="areYouSure()" class="hidden-button">Delete Project</button>

        

    <!-- tooltip that list the restrictions put on the password -->
  <div class="tooltip">?
    <span class="tooltiptext">Select file from the dropdown, click run to see election results. If you want to delete an old election, use the delete button.
      </span>
  </div>

</div>
        </div>

        <div id="Lbar-container" display="none">
            <label for="Lbar-bar" id="Lbar-text">Test</label>
            
            <div id="Lbar-border">
                <div id="Lbar-bar" class="unstarted"></div>
            </div>
            
        </div> 
        <br>
        <div id="switch-div">
            <p id="switch-p-l">Rank Choice Voting</p>
            <label id="toggle-switch" class="switch">
                <input type="checkbox" id="important-part">
                <span class="slider round"></span>
            </label>
            <p id="switch-p-r" >Point-Based Voting</p>
          
         <!-- tooltip that explains the two different options on election slider-->
        </div>
        <div class="tooltip">?
            <span class="tooltiptext">Rank Choice Voting: New system that uses conventional rank choice voting system <br> <br> Point-Based system: Old school system that calculates via points (First Place: 5, Second Place: 3, Third Place: 1)
              </span>
          </div>
          <br></br>
        <div id="other" onclick=""></div>

    </div>
    <div id="point_graph" style="display: none" data-election="None"></div>
    <div id = "chartDiv" style="display: grid" data-election="None"></div>

    </div>
    <br>

    <!--Links layout to upload and imports the csv database function-->
    <script type="module" src="./scripts/animations.js" defer></script>
    <script type="module" src="./scripts/upload.js" defer></script>
    <script type="module" src="./scripts/vote.js" defer></script>
    <script type="module" src="./scripts/instructions.js" defer></script>
    <script type="module">
        import * as uploadjs from "./scripts/upload.js";
        import * as votejs from "./scripts/vote.js";
        import * as optjs from "./scripts/optimizations.js";
        import * as instructionsjs from "./scripts/instructions.js";
        window.importCSVToDatabase = uploadjs.importCSVToDatabase;
        window.loadFromDatabase = votejs.loadFromDatabase;
        window.getCollectionList = uploadjs.getCollectionList;
        window.vote = votejs.vote;
        window.count = votejs.count;
        window.checkLocal = optjs.checkLocal;
        window.destroyVotes = uploadjs.destroyVotes;
        window.removeWinner = votejs.removeWinner;
        window.point = votejs.point;
        window.updateVote = votejs.updateVote;
        window.initVote = votejs.initVote;
        window.areYouSure = uploadjs.areYouSure;

        await getCollectionList();
        await loadFromDatabase();
        await initVote(JSON.parse(sessionStorage.getItem('allVotes')));
      </script>
</body>
</html>

</script>