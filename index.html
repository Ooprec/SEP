<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/layout.css">
    <link rel="stylesheet" href="./styles/animations.css">
    <title>Student Election Project</title>
</head>
<body class="light">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <div id="main-page" class="light">
        
        <h1 id="header" class="maroon" >
            
            <p id="header-text" class="title-anim maroon">Student Elections</p> 
            
        </h1>


        <!--start collapsible-->
        <label id="collapsible-label" class="collapsible-label maroon" for="collapsible">Upload Election</label>
        <button type="button" id="collapsible" class="collapsible maroon">Upload Election</button>
        <div class="collapsible-content light">
            <div id="instruct-div" class="light">
                <label for="instructions" class="custom-overlay-button light">Instructions</label>
                <button id="instructions" onclick="window.location.href='instructions.html'" class="hidden-button"></button>
            </div>
            
        <form action="" id="uploadForm" class="light">
            <div id="inputs" class="light">
                <label for="csv" id="upload-csv-label" class="input-label">Upload CSV:</label>
                <label for="csv" id="replacement-button" class="custom-overlay-button">Choose File...</label>
                <input type="file" id="csv" accept=".csv" required> <br><br>
                
                <label for="csv-name" class="input-label light">Election Name: </label>
                <input type="text" id="csv-name" class="light" placeholder="" minlength="5">

                <br><br>
                <label for="submit" class="custom-overlay-button" onclick="">Submit</label>
                <button type="submit" class="hidden-button" id="submit" onclick=""></button>

                </div>
            </form>

            <div id="Ubar-container">
                <label for="Ubar-bar" id="Ubar-text">_</label>
                
                <div id="Ubar-border">
                    <div id="Ubar-bar" class="unstarted"></div>
                </div>
            </div>

        <div class="thin-bar maroon"></div>

         </div> <!--end collapsible-->

        <br>

        

        <div id="post-form">
            <select id="csv-options" class="light" onchange="document.getElementById('chartDiv').innerHTML = ''; document.getElementById('download').click()"></select></select>
            <label for="download" class="custom-overlay-button">Run</label>
            <button id="download" onclick="sessionStorage.setItem('on-second', JSON.stringify(false));document.getElementById('chartDiv').innerHTML = ''; if (document.getElementById('electionresultscollapsible').classList.contains('active') ) {document.getElementById('electionresultscollapsible').click()}; loadFromDatabase();sessionStorage.setItem('on-second', JSON.stringify(false));document.getElementById('chartDiv').innerHTML = ''; if (document.getElementById('electionresultscollapsible').classList.contains('active') ) {document.getElementById('electionresultscollapsible').click(); document.getElementById('chartDiv').innerHTML = ''}; loadFromDatabase();vote(JSON.parse(sessionStorage.getItem('allVotes'))); document.getElementById('Lbar-container').click(); document.getElementById('Lbar-container').click()" class="hidden-button" ></button>
        
            <label for="thingss" class="custom-overlay-button">Destroy Votes</label>
            <button id="thingss" onclick="destroyVotes()" class="hidden-button">Delete Project</button>

    
        </div>

        <div id="Lbar-container">
            <label for="Lbar-bar" id="Lbar-text">Test</label>
            
            <div id="Lbar-border">
                <div id="Lbar-bar" class="unstarted"></div>
            </div>
            
        </div> <br><br>
    

    </div>
    <div id="point_graph"></div>


     <!--start collapsible-->
    <label id="collapsible-label" class="collapsible-label maroon test-label" for="electionresultscollapsible">Election Results</label>
    <button type="button" id="electionresultscollapsible" onclick="" class="collapsible maroon">Election Results</button>
    
    <div class="collapsible-content-election light" id="election-results">
        <div id="chartDiv" class="light"></div>
    </div> <!--end collapsible-->
    <br>
    


    <!--Links layout to upload and imports the csv database function-->
    <script type="module" src="./scripts/animations.js" defer></script>
    <script type="module" src="./scripts/upload.js" defer></script>
    <script type="module" src="./scripts/vote.js" defer></script>
    <script type="module">
        import * as uploadjs from "./scripts/upload.js";
        import * as votejs from "./scripts/vote.js";
        import * as optjs from "./scripts/optimizations.js";
        window.importCSVToDatabase = uploadjs.importCSVToDatabase;
        window.loadFromDatabase = votejs.loadFromDatabase;
        window.getCollectionList = uploadjs.getCollectionList;
        window.vote = votejs.vote;
        window.count = votejs.count;
        window.checkLocal = optjs.checkLocal;
        window.destroyVotes = uploadjs.destroyVotes;
        window.removeWinner = votejs.removeWinner;
        window.point = votejs.point;

        getCollectionList();
        checkLocal();
        sessionStorage.setItem('on-second', JSON.stringify(false));
        vote(JSON.parse(sessionStorage.getItem('allVotes')));
      </script>
</body>
</html>

</script>